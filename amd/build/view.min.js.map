{"version":3,"sources":["../src/view.js"],"names":["SELECTOR","MAIN","LOADING","TEMPLATE","allowAccess","window","location","reload","addLoadingAlert","Templates","render","then","html","js","alertRegion","document","querySelector","prependNodeContents","catch","Notification","exception","clearLoadingAlert","alert","replaceNode"],"mappings":"2fAwBA,uDACA,O,yiBAGMA,CAAAA,CAAQ,CAAG,CACbC,IAAI,CAAE,cADO,CAEbC,OAAO,CAAE,cAFI,C,CAMXC,CAAQ,CAAG,CACbD,OAAO,CAAE,wBADI,C,eAOU,QAAdE,CAAAA,WAAc,EAAM,CAC7BC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EACH,C,CAOM,GAAMC,CAAAA,CAAe,CAAG,UAAM,CACjC,MAAOC,CAAAA,CAAS,CAACC,MAAV,CAAiBP,CAAQ,CAACD,OAA1B,CAAmC,EAAnC,EAAuCS,IAAvC,CAA4C,SAACC,CAAD,CAAOC,CAAP,CAAc,CAC7D,GAAMC,CAAAA,CAAW,CAAGT,MAAM,CAACU,QAAP,CAAgBC,aAAhB,CAA8BhB,CAAQ,CAACC,IAAvC,CAApB,CACA,MAAOQ,CAAAA,CAAS,CAACQ,mBAAV,CAA8BH,CAA9B,CAA2CF,CAA3C,CAAiDC,CAAjD,CACV,CAHM,EAGJK,KAHI,CAGEC,UAAaC,SAHf,CAIV,CALM,C,oBAUA,GAAMC,CAAAA,CAAiB,CAAG,UAAM,CACnC,GAAMC,CAAAA,CAAK,CAAGjB,MAAM,CAACU,QAAP,CAAgBC,aAAhB,CAA8BhB,CAAQ,CAACE,OAAvC,CAAd,CACA,GAAIoB,CAAJ,CAAW,CACPb,CAAS,CAACc,WAAV,CAAsBD,CAAtB,CAA6B,EAA7B,CAAiC,EAAjC,CACH,CACJ,CALM,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage the quiz views.\n *\n * @module     quizaccess_seb/view\n * @author     Andrew Madden <andrewmadden@catalyst-au.net>\n * @copyright  2021 Catalyst IT\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Notification from \"core/notification\";\nimport * as Templates from \"core/templates\";\n\n/** @var SELECTOR List of CSS selectors. */\nconst SELECTOR = {\n    MAIN: '#region-main',\n    LOADING: '.seb-loading',\n};\n\n/** @var Template List of mustache templates. */\nconst TEMPLATE = {\n    LOADING: 'quizaccess_seb/loading',\n};\n\n/**\n * Manages view when access has been granted.\n */\nexport const allowAccess = () => {\n    window.location.reload();\n};\n\n/**\n * Add an alert to page to inform that Safe Exam Browser access is being checked.\n *\n * @return {Promise}\n */\nexport const addLoadingAlert = () => {\n    return Templates.render(TEMPLATE.LOADING, {}).then((html, js) => {\n        const alertRegion = window.document.querySelector(SELECTOR.MAIN);\n        return Templates.prependNodeContents(alertRegion, html, js);\n    }).catch(Notification.exception);\n};\n\n/**\n * Remove the Safe Exam Browser access check alert from the page.\n */\nexport const clearLoadingAlert = () => {\n    const alert = window.document.querySelector(SELECTOR.LOADING);\n    if (alert) {\n        Templates.replaceNode(alert, '', '');\n    }\n};\n"],"file":"view.min.js"}